function main(){let s=!1;const e=document.getElementsByClassName("upper_frame_button")[0],t=document.getElementsByClassName("upper_frame_main_button")[0],l=document.createElement("div"),o=document.createElement("div");let a=document.createElement("div");const n=document.createElement("div"),i=(n.classList.add("blackout"),e.addEventListener("click",c),t.addEventListener("click",c),n.addEventListener("click",d),window.addEventListener("scroll",function(){a.style.top=window.scrollY+"px"}),a.classList.add("overlay"),a.appendChild(n),a.appendChild((l.classList.add("popUp"),o.innerHTML='<div class="form" id="pop-up">\n<div class="form-crossbar">\n<img class="form-crossbar__image"\nalt="крестик"\nsrc="images/cross.svg"/>\n</div>\n<img class="form__image"\nsrc="images/form-image.webp"\nalt="welcome"/>\n<div class="form-header">\n<h3 class="form-header__text">Записаться на курс</h3>\n</div>\n<div class="form-data">\n<form id="ajax-form" class="form-data" method="POST" action="">\n<label class="form-label">\n<input id="ajax-form__name" required class="form-label form-label__text" type="text" name="name" placeholder="Ваше имя" pattern="[А-Яа-я]+"/>\n</label>\n<label class="form-label">\n<input id="ajax-form__email" required class="form-label form-label__text" type="email" name="email" placeholder="Email" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[A-Za-z]{1,63}$"/>\n</label>\n<label class="form-label">\n<select required id="ajax-form__activity" name="{%activity%}" class="form-select form-label__text">\n<option style="display: none" selected disabled>Деятельность</option>\n<option value="programmer">Программист</option>\n<option value="designer">Дизайнер</option>\n<option value="marketer">Маркетолог</option>\n</select>\n</label>\n<div class="form-checkbox">\n<input type="checkbox" id="subscribeNews" name="subscribe" value="newsletter" class="subscribe-block"/>\n<label for="subscribeNews" class="form-checkbox__text">\nСогласен получать информационные материалы о старте курса\n</label>\n</div>\n<p>\n<input id="submit__button" class="submit-block" type="submit" value="Записаться на курс"/>\n</p>\n</form>\n</div>\n</div>',l.appendChild(o),l)),document.createElement("div"));function c(){document.body.appendChild(a),setTimeout(()=>{l.classList.add("popUpShow"),n.classList.add("blackoutShow")},1);const e=document.getElementsByClassName("form-crossbar__image")[0],t=(e.addEventListener("click",d),document.getElementById("submit__button"));t.addEventListener("click",m)}function d(){const e=document.getElementsByClassName("overlay")[0];setTimeout(()=>{document.body.removeChild(e),!0===s&&(l.removeChild(i),l.appendChild(o),s=!1)},220),l.classList.remove("popUpShow"),n.classList.remove("blackoutShow")}async function m(e){e.preventDefault();var e=document.getElementById("ajax-form__name"),t=document.getElementById("ajax-form__email"),a=document.getElementById("subscribeNews"),n=document.getElementById("ajax-form__activity");r(e)&&r(t)&&r(n)&&(e=JSON.stringify({name:e.value,email:t.value,activity:n.value,news:a.value}),(t=await fetch("register.php",{method:"POST",body:e,headers:{"Content-Type":"application/json"}})).ok?d():500===t.status?(l.removeChild(o),l.appendChild(i),s=!0):alert("Код ошибки: ".response.status))}function r(e){if(e.validity.patternMismatch)u(e);else{if(!e.validity.valueMissing)return 1;u(e)}}function u(e){e.classList.add("form-error")}i.innerHTML='<p class="error-message">Упс.. Произошла ошибка!</p>',document.addEventListener("keydown",function(e){"Escape"===e.code&&d()})}window.onload=main;